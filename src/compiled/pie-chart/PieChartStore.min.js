define(function(require){"use strict";var AppDispatcher=require("AppDispatcher"),_=require("lodash"),PieChartActions=require("drc/pie-chart/PieChartActions.min"),StoreBase=require("drc/lib/StoreBase.min"),ActionTypes=PieChartActions.actionTypes,PieChart=function(id,definition){this.id=id,this.definition=definition,this.url=definition.url,this.label=definition.label};PieChart.prototype={onDataReceived:function(data){this.data=data},errorFunction:function(){this.data=null},getData:function(){return this.data},getLabel:function(){return this.label}};var PieChartStore=_.merge({collection:{},componentType:"PieChart",createInstance:function(id,definition){this.collection[id]=new PieChart(id,definition)},destroyInstance:function(id){delete this.collection[id]},getData:function(id){return this.collection[id].getData()},getLabel:function(id){return this.collection[id]?this.collection[id].getLabel():void 0},dispatchRegister:function(payload){var action=payload.action;if(this.shouldHandleAction(action.component))switch(action.actionType){case ActionTypes.REQUEST_DATA:this.handleRequestDataAction(action);break;case ActionTypes.DESTROY_INSTANCE:this.destroyInstance(action.id)}},PieChart:PieChart},StoreBase);return AppDispatcher.register(_.bind(PieChartStore.dispatchRegister,PieChartStore)),PieChartStore});
